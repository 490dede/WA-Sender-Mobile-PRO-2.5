<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delivery Chat - WA-Sender PRO 2.5</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #F8FAFC; color: #1E293B; }
        .glass-card { background: white; border-radius: 2.5rem; border: 1px solid #F1F5F9; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-4xl mx-auto space-y-6">
        <nav class="flex justify-between items-center bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100">
            <div class="flex items-center gap-4">
                <button onclick="history.back()" class="w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center hover:bg-slate-900 hover:text-white transition-all"><i class="fa-solid fa-arrow-left"></i></button>
                <h1 class="text-lg font-black italic">Delivery Chat</h1>
            </div>
            <button onclick="toggleLang()" id="langBtn" class="px-5 py-2 bg-indigo-50 text-indigo-600 rounded-xl font-black text-[10px] uppercase border border-indigo-100">Switch to English</button>
        </nav>

        <main class="glass-card p-8 md:p-12 space-y-6">
            <textarea id="phoneList" placeholder="62812345678 (Satu nomor per baris)" class="w-full p-5 bg-slate-50 border border-slate-100 rounded-3xl font-bold h-32 outline-none focus:border-indigo-500"></textarea>
            <textarea id="messageText" placeholder="Tulis pesan Anda di sini..." class="w-full p-5 bg-slate-50 border border-slate-100 rounded-3xl font-bold h-40 outline-none focus:border-indigo-500"></textarea>
            <button onclick="processQueue()" class="w-full py-5 bg-slate-900 text-white rounded-3xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-600 transition-all">Luncurkan Pengiriman</button>
        </main>

        <div id="queueContainer" class="space-y-3"></div>
    </div>

    <script>
        const SB_URL = "https://xitvmryrzeiinlcgdrfj.supabase.co";
        const SB_KEY = "sb_publishable_DLbeS1UUi5tjY51yRy6VkA_unJMJFbk";
        const supabase = window.supabase.createClient(SB_URL, SB_KEY);

        function processQueue() {
            const phones = document.getElementById('phoneList').value.split('\n').filter(p => p.trim() !== "");
            const msg = encodeURIComponent(document.getElementById('messageText').value);
            const container = document.getElementById('queueContainer');
            container.innerHTML = "";

            phones.forEach(phone => {
                const item = document.createElement('div');
                item.className = "flex justify-between items-center p-5 bg-white rounded-2xl border border-slate-100";
                item.innerHTML = `
                    <span class="font-bold text-slate-700">${phone}</span>
                    <a href="https://wa.me/${phone.trim()}?text=${msg}" target="_blank" onclick="this.innerText='TERKIRIM'; this.className='text-slate-400 text-xs font-black'" class="px-4 py-2 bg-emerald-50 text-emerald-600 rounded-lg font-black text-[10px] uppercase">Kirim WA</a>
                `;
                container.appendChild(item);
            });
        }
    </script>
</body>
</html>
